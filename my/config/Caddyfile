:${PORT} {
  # Uncomment the following block and provide SSL certificate and key paths
  # ssl {
  #   cert /etc/ssl/certs/example.com.crt
  #   key /etc/ssl/private/example.com.key
  # }

  root * /app/web
  file_server browse

  log {
    format json
    level debug
  }

  header {
    X-Robots-Tag none
    X-Content-Type-Options nosniff
    X-Frame-Options DENY
    Referrer-Policy no-referrer-when-downgrade
  }

  # Serve the main homepage
  handle / {
    file_server {
      root /app/web
      index index.html
    }
  }

  # /sub
  handle /sub {
    file_server {
      root ${FILE_PATH}
      index sub.txt
    }
  }
}

:${V_PORT} {
  @websocket_xray {
    header Connection *Upgrade*
    header Upgrade websocket
    path /${VMESS_WSPATH}|/${VLESS_WSPATH}
  }
}
